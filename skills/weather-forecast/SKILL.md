---
name: weather-forecast
description: 気象庁の公式APIから日本の都市の天気予報を取得して日本語で回答します。WebFetchツールで気象庁の公式データから信頼性の高い天気情報を取得します。
license: Apache-2.0
metadata:
  author: agent-skills-mcp-server
  version: "3.0"
  language: ja
  data_source: jma.go.jp
---

# 天気予報スキル (気象庁公式API版)

このスキルは気象庁の公式APIから日本の天気予報を取得して、ユーザーに分かりやすく日本語で提供します。

## 目的

ユーザーが指定した日本の都市や地域の天気情報を気象庁の公式データから取得して、以下の情報を提供します:

- 今日・明日の天気予報
- 週間天気予報
- 気温(最高気温・最低気温)
- 降水確率
- 気象警報・注意報情報
- 天気概況

## 使用方法

### 必須ツール

**WebFetch**: 気象庁の公式APIエンドポイントから天気情報を取得

### 気象庁API概要

気象庁は以下のAPIを提供しています：

1. **予報API**: `https://www.jma.go.jp/bosai/forecast/data/forecast/{area_code}.json`
2. **警報・注意報API**: `https://www.jma.go.jp/bosai/forecast/data/warn/{area_code}.json`
3. **天気概況API**: `https://www.jma.go.jp/bosai/forecast/data/overview_forecast/{area_code}.json`

### 主要都市の地域コードマッピング

| 都市名     | 地域コード | 上位地域      |
| ---------- | ---------- | ------------- |
| 東京       | 130000     | 関東甲信地方 |
| 横浜       | 140000     | 関東甲信地方 |
| 大阪       | 270000     | 近畿地方     |
| 名古屋     | 230000     | 東海地方     |
| 札幌       | 016000     | 北海道地方   |
| 福岡       | 400000     | 九州北部地方 |
| 仙台       | 040000     | 東北地方     |
| 京都       | 260000     | 近畿地方     |
| 神戸       | 280000     | 近畿地方     |
| 広島       | 340000     | 中国地方     |
| 金沢       | 170000     | 北陸地方     |
| 高松       | 370000     | 四国地方     |
| 那覇       | 471000     | 沖縄地方     |
| 青森       | 020000     | 東北地方     |
| 盛岡       | 030000     | 東北地方     |
| 秋田       | 050000     | 東北地方     |
| 山形       | 060000     | 東北地方     |
| 福島       | 070000     | 東北地方     |
| 水戸       | 080000     | 関東甲信地方 |
| 宇都宮     | 090000     | 関東甲信地方 |
| 前橋       | 100000     | 関東甲信地方 |
| さいたま   | 110000     | 関東甲信地方 |
| 千葉       | 120000     | 関東甲信地方 |
| 甲府       | 190000     | 関東甲信地方 |
| 長野       | 200000     | 関東甲信地方 |
| 岐阜       | 210000     | 東海地方     |
| 静岡       | 220000     | 東海地方     |
| 津         | 240000     | 東海地方     |
| 大津       | 250000     | 近畿地方     |
| 奈良       | 290000     | 近畿地方     |
| 和歌山     | 300000     | 近畿地方     |
| 鳥取       | 310000     | 中国地方     |
| 松江       | 320000     | 中国地方     |
| 岡山       | 330000     | 中国地方     |
| 山口       | 350000     | 中国地方     |
| 徳島       | 360000     | 四国地方     |
| 高知       | 390000     | 四国地方     |
| 松山       | 380000     | 四国地方     |
| 佐賀       | 410000     | 九州北部地方 |
| 長崎       | 420000     | 九州北部地方 |
| 熊本       | 430000     | 九州南部地方 |
| 大分       | 440000     | 九州北部地方 |
| 宮崎       | 450000     | 九州南部地方 |
| 鹿児島     | 460000     | 九州南部地方 |

### APIエンドポイント構成

気象庁APIのURL形式:
- **予報データ**: `https://www.jma.go.jp/bosai/forecast/data/forecast/{地域コード}.json`
- **警報・注意報**: `https://www.jma.go.jp/bosai/forecast/data/warn/{地域コード}.json`
- **天気概況**: `https://www.jma.go.jp/bosai/forecast/data/overview_forecast/{地域コード}.json`

## 指示

このスキルが実行されたら、**必ず以下の手順に従ってください**:

### ステップ1: 地域の確認と地域コードの決定

1. ユーザーが指定した都市・地域を確認
2. 上記のマッピング表から該当する地域コードを探す
3. マッピング表にない場合は、最寄りの主要都市の地域コードを使用
4. 地域が不明確な場合は、具体的な都市名を質問する

### ステップ2: 気象庁APIから情報取得

**WebFetchツールを2回実行して、以下の情報を取得:**

#### 2-1: 予報データの取得

```
WebFetch(
  url="https://www.jma.go.jp/bosai/forecast/data/forecast/{地域コード}.json",
  prompt="この気象庁の予報JSONデータから以下の情報を抽出して構造化してください:
  1. 今日と明日の天気予報（天気、最高気温、最低気温、降水確率）
  2. 週間天気予報（日付、曜日、天気、最高気温、最低気温、降水確率）
  3. 発表日時と予報対象地域
  すべての情報を日本語で分かりやすく整理してください。"
)
```

#### 2-2: 天気概況の取得

```
WebFetch(
  url="https://www.jma.go.jp/bosai/forecast/data/overview_forecast/{地域コード}.json",
  prompt="この気象庁の天気概況JSONデータから、天気の全般的な概況や特記事項があれば抽出して、日本語で要約してください。"
)
```

例: 東京の場合

```
# 予報データ
WebFetch(
  url="https://www.jma.go.jp/bosai/forecast/data/forecast/130000.json",
  prompt="予報データの抽出"
)

# 天気概況
WebFetch(
  url="https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json",
  prompt="天気概況の取得"
)
```

### ステップ3: 情報の統合と提供

2つのWebFetchツールから取得した気象庁の公式データを統合し、以下の形式で日本語で整理して提供:

```
【[都市名]の天気予報】（気象庁公式データ）

■今日・明日の予報
- 今日(X月X日): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- 明日(X月X日): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%

■週間天気予報
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%

■天気概況
[気象庁が発表している天気の全般的な概況やポイント]

■生活上のアドバイス
[傘の必要性、服装のアドバイス、外出時の注意点など]

発表機関: 気象庁 (https://www.jma.go.jp/)
予報発表日時: [気象庁発表日時]
データ取得日時: [実行時の日時]
```

### ステップ4: エラーハンドリング

- APIが404エラーや通信エラーの場合: 「申し訳ございません。[都市名]の天気情報の取得に失敗しました。しばらく時間をおいて再度お試しいただくか、別の都市名でお試しください。」
- 地域コードが不明な場合: 最寄りの主要都市を提案するか、ユーザーに詳細な地域名を確認
- JSONデータが不正な場合: 利用可能な他のAPIから情報を取得してフォールバック

## 実行例

### 例1: 東京の天気

**ユーザー:** 「東京の天気を教えて」

**実行手順:**

1. 地域コード決定: 東京 → `130000`
2. 気象庁API実行（2回）:
   ```
   # 予報データ
   WebFetch(
     url="https://www.jma.go.jp/bosai/forecast/data/forecast/130000.json",
     prompt="予報データを抽出"
   )
   
   # 天気概況
   WebFetch(
     url="https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json",
     prompt="天気概況を取得"
   )
   ```
3. 取得した情報を統合して提供

**期待される応答:**

```
天気予報スキルを実行します。気象庁の公式APIから東京の最新天気情報を取得します。

[WebFetchツール実行: 気象庁API 2回]

【東京の天気予報】（気象庁公式データ）

■今日・明日の予報
- 今日(1月27日): 晴れのち曇り / 最高16℃ 最低8℃ / 降水確率20%
- 明日(1月28日): 曇り時々雨 / 最高14℃ 最低9℃ / 降水確率60%

■週間天気予報
- 1/29(水): 雨 / 最高12℃ 最低7℃ / 降水確率80%
- 1/30(木): 曇り / 最高13℃ 最低6℃ / 降水確率30%
- 1/31(金): 晴れ / 最高15℃ 最低5℃ / 降水確率10%
- 2/1(土): 晴れ / 最高16℃ 最低4℃ / 降水確率0%
- 2/2(日): 曇り / 最高14℃ 最低6℃ / 降水確率20%

■天気概況
本州付近は高気圧に覆われていますが、明日以降は低気圧の影響で天気は下り坂となる見込みです。

■気象警報・注意報
警報・注意報なし

■生活上のアドバイス
明日は雨の予報なので、傘を持って外出することをおすすめします。

発表機関: 気象庁 (https://www.jma.go.jp/)
予報発表日時: 2026年1月27日 11:00
データ取得日時: 2026年1月27日 13:45
```

### 例2: 大阪の天気

**ユーザー:** 「大阪の天気は？」

**実行手順:**

1. 地域コード決定: 大阪 → `270000`
2. 気象庁API実行（2回）:
   ```
   # 予報データ
   WebFetch(
     url="https://www.jma.go.jp/bosai/forecast/data/forecast/270000.json",
     prompt="予報データを抽出"
   )
   
   # 天気概況
   WebFetch(
     url="https://www.jma.go.jp/bosai/forecast/data/overview_forecast/270000.json",
     prompt="天気概況を取得"
   )
   ```

### 例3: マッピング表にない都市（川崎）

**ユーザー:** 「川崎の天気を教えて」

**実行手順:**

1. 地域コード決定: 川崎 → 最寄りの横浜 `140000` または東京 `130000` を使用
2. 気象庁API実行して横浜/東京の天気を取得
3. 「川崎市は横浜に近いため、横浜の天気予報を参考にしてください」として提供

## 重要な注意事項

### 必須事項

- **必ずWebFetchツールを使用すること**: WebSearchではなく、WebFetchで明示的なAPIエンドポイントから取得
- **URLは必ず気象庁の公式APIを使用**: `https://www.jma.go.jp/bosai/forecast/data/`
- **情報源として気象庁を明記**
- **2つのAPIから情報を取得**: 予報、天気概況

### 制限事項

- このスキルは日本国内の都市のみ対応
- 日本国外の天気を求められた場合: 「このスキルは日本国内の天気予報のみに対応しています」と回答
- 細かい地域（区や町レベル）を求められた場合: 最寄りの主要都市の天気を提供

### 信頼性とメリット

- **公式データ**: 気象庁の公式APIを使用するため、データの信頼性が非常に高い
- **安定性**: 民間サイトのスクレイピングと違い、APIの構造変更が少ない
- **包括性**: 警報・注意報や天気概況まで含む詳細な情報を提供
- **正確性**: 気象庁が直接発表するデータのため、情報の正確性が保証される

### トラブルシューティング

- APIが404を返す場合: 地域コードを確認し、マッピング表の正しいコードを使用
- APIがタイムアウトする場合: ユーザーに一時的な問題を伝え、しばらく時間をおいて再試行を推奨
- JSONデータが不完全な場合: 利用可能なデータのみで回答し、不足部分があることを明記
- 地域コードが不明な場合: 「申し訳ございませんが、[都市名]の正確な地域コードが見つかりません。最寄りの主要都市（例：東京、大阪など）でお試しください」と案内