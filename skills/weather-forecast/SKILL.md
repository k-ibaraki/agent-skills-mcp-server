---
name: weather-forecast
description: ウェザーニュースから日本の都市の天気予報を取得して日本語で回答します。WebFetchツールで明示的なURLから天気情報を取得します。
license: Apache-2.0
metadata:
  author: agent-skills-mcp-server
  version: "2.0"
  language: ja
  data_source: weathernews.jp
---

# 天気予報スキル (ウェザーニュース版)

このスキルはウェザーニュースから日本の天気予報を取得して、ユーザーに分かりやすく日本語で提供します。

## 目的

ユーザーが指定した日本の都市や地域の天気情報をウェザーニュースから取得して、以下の情報を提供します:
- 現在の天気
- 今日・明日の天気予報
- 週間天気予報
- 気温(最高気温・最低気温)
- 降水確率
- その他の気象情報(湿度、風速など)

## 使用方法

### 必須ツール

**WebFetch**: ウェザーニュースの特定URLから天気情報を取得

### 主要都市の地域コードマッピング

| 都市名 | 地域コード | URL |
|--------|-----------|-----|
| 東京 | tokyo | https://weathernews.jp/onebox/tokyo/ |
| 横浜 | yokohama | https://weathernews.jp/onebox/yokohama/ |
| 大阪 | osaka | https://weathernews.jp/onebox/osaka/ |
| 名古屋 | nagoya | https://weathernews.jp/onebox/nagoya/ |
| 札幌 | sapporo | https://weathernews.jp/onebox/sapporo/ |
| 福岡 | fukuoka | https://weathernews.jp/onebox/fukuoka/ |
| 仙台 | sendai | https://weathernews.jp/onebox/sendai/ |
| 京都 | kyoto | https://weathernews.jp/onebox/kyoto/ |
| 神戸 | kobe | https://weathernews.jp/onebox/kobe/ |
| 広島 | hiroshima | https://weathernews.jp/onebox/hiroshima/ |

### URL構築ルール

ウェザーニュースのURL形式: `https://weathernews.jp/onebox/[地域コード]/`

- 地域コードは都市名のローマ字（小文字）を使用
- 上記マッピング表にない都市の場合は、都市名のローマ字を試す
- 例: 千葉 → chiba → https://weathernews.jp/onebox/chiba/

## 指示

このスキルが実行されたら、**必ず以下の手順に従ってください**:

### ステップ1: 地域の確認と地域コードの決定

1. ユーザーが指定した都市・地域を確認
2. 上記のマッピング表から該当する地域コードを探す
3. マッピング表にない場合は、都市名をローマ字（小文字）に変換して地域コードとする
4. 地域が不明確な場合は、具体的な都市名を質問する

### ステップ2: ウェザーニュースURLから情報取得

**WebFetchツールを必ず使用して、以下のように実行:**

```
WebFetch(
  url="https://weathernews.jp/onebox/[地域コード]/",
  prompt="このページから以下の天気情報を抽出してください:
  1. 現在の天気と気温
  2. 今日の天気予報（最高気温、最低気温、降水確率）
  3. 明日の天気予報（最高気温、最低気温、降水確率）
  4. 週間天気予報（日付、天気、気温）
  5. 警報や注意報があれば記載
  全ての情報を日本語で構造化して返してください。"
)
```

例: 東京の場合
```
WebFetch(
  url="https://weathernews.jp/onebox/tokyo/",
  prompt="上記の天気情報を抽出"
)
```

### ステップ3: 情報の整理と提供

WebFetchツールから取得した天気情報を、以下の形式で日本語で整理して提供:

```
【[都市名]の天気予報】（ウェザーニュース提供）

■現在の天気
- 天気: [晴れ/曇り/雨/雪など]
- 気温: [XX]℃

■今日・明日の予報
- 今日(X月X日): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%
- 明日(X月X日): [天気] / 最高[XX]℃ 最低[XX]℃ / 降水確率[XX]%

■週間天気予報
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃
- X/X(曜): [天気] / 最高[XX]℃ 最低[XX]℃
...

■アドバイス
[傘の必要性、服装のアドバイスなど]

■警報・注意報
[ある場合のみ記載]

情報源: ウェザーニュース (https://weathernews.jp/onebox/[地域コード]/)
取得日時: [実行時の日時]
```

### ステップ4: エラーハンドリング

- URLが404エラーの場合: 「申し訳ございません。[都市名]の天気情報が見つかりませんでした。都市名を確認してもう一度お試しください。」
- WebFetchが失敗した場合: 別の都市名を試すか、ユーザーに確認を求める

## 実行例

### 例1: 東京の天気

**ユーザー:** 「東京の天気を教えて」

**実行手順:**

1. 地域コード決定: 東京 → `tokyo`
2. WebFetch実行:
   ```
   WebFetch(
     url="https://weathernews.jp/onebox/tokyo/",
     prompt="天気情報を抽出"
   )
   ```
3. 取得した情報を整形して提供

**期待される応答:**

```
天気予報スキルを実行します。ウェザーニュースから東京の最新天気情報を取得します。

[WebFetchツール実行: https://weathernews.jp/onebox/tokyo/]

【東京の天気予報】（ウェザーニュース提供）

■現在の天気
- 天気: 晴れ
- 気温: 15℃

■今日・明日の予報
- 今日(1月27日): 晴れのち曇り / 最高16℃ 最低8℃ / 降水確率20%
- 明日(1月28日): 曇り時々雨 / 最高14℃ 最低9℃ / 降水確率60%

■週間天気予報
- 1/29(水): 雨 / 最高12℃ 最低7℃
- 1/30(木): 曇り / 最高13℃ 最低6℃
- 1/31(金): 晴れ / 最高15℃ 最低5℃
- 2/1(土): 晴れ / 最高16℃ 最低4℃
- 2/2(日): 曇り / 最高14℃ 最低6℃

■アドバイス
明日は雨の予報なので、傘を持って外出することをおすすめします。

情報源: ウェザーニュース (https://weathernews.jp/onebox/tokyo/)
取得日時: 2026年1月27日 13:45
```

### 例2: 大阪の天気

**ユーザー:** 「大阪の天気は？」

**実行手順:**

1. 地域コード決定: 大阪 → `osaka`
2. WebFetch実行:
   ```
   WebFetch(
     url="https://weathernews.jp/onebox/osaka/",
     prompt="天気情報を抽出"
   )
   ```

### 例3: マッピング表にない都市（千葉）

**ユーザー:** 「千葉の天気を教えて」

**実行手順:**

1. 地域コード決定: 千葉 → `chiba`（ローマ字変換）
2. WebFetch実行:
   ```
   WebFetch(
     url="https://weathernews.jp/onebox/chiba/",
     prompt="天気情報を抽出"
   )
   ```

## 重要な注意事項

### 必須事項

- **必ずWebFetchツールを使用すること**: WebSearchではなく、WebFetchで明示的なURLから取得
- **URLは必ず `https://weathernews.jp/onebox/[地域コード]/` の形式を使用**
- **情報源としてウェザーニュースを明記**

### 制限事項

- このスキルは日本国内の都市のみ対応
- 日本国外の天気を求められた場合: 「このスキルは日本国内の天気予報のみに対応しています」と回答
- 細かい地域（区や町レベル）を求められた場合: 最寄りの主要都市の天気を提供

### トラブルシューティング

- URLが404を返す場合: 地域コードを都市名のローマ字に変更して再試行
- WebFetchがタイムアウトする場合: ユーザーに一時的な問題を伝え、後で再試行を推奨
- 情報が取得できない場合: その旨を正直に伝え、別の都市名を試すよう提案
